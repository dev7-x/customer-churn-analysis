# Customer Churn Analysis

This project demonstrates a full pipeline for customer churn analysis, from data generation to model training and visualization.

## Project Overview

The goal of this project is to predict customer churn for a fictional SaaS company. The pipeline includes the following steps:

1.  **Data Generation**: A Python script generates synthetic data for users, events, billing, and support tickets.
2.  **Feature Engineering**: Raw data is transformed into meaningful features for model training.
3.  **Model Training**: A Random Forest Classifier is trained on the engineered features to predict churn.
4.  **Visualization**: A Streamlit application provides a dashboard to visualize feature importances and identify at-risk customers.

## Project Structure

```
.
├── data/
│   ├── billing.csv
│   ├── events.csv
│   ├── features_table.csv
│   ├── labels.csv
│   ├── support.csv
│   └── users.csv
├── src/
│   ├── app.py
│   ├── features.py
│   ├── generate_saas_data.py
│   ├── streamlit_app.py
│   └── train_model.py
├── .gitignore
├── README.md
└── requirements.txt
```

-   **`data/`**: Contains the raw and processed data.
-   **`src/`**: Contains the Python scripts for the project.
-   **`requirements.txt`**: Lists the Python dependencies.

## Getting Started

### Prerequisites

-   Python 3.x
-   pip

### Installation

1.  **Clone the repository:**

    ```bash
    git clone https://github.com/your-username/customer-churn-analysis.git
    cd customer-churn-analysis
    ```

2.  **Create a virtual environment and install the dependencies:**

    ```bash
    python -m venv .venv
    source .venv/bin/activate  # On Windows, use `.venv\Scripts\activate`
    pip install -r requirements.txt
    ```

## Usage

1.  **Generate the data:**

    ```bash
    python src/generate_saas_data.py
    ```

    This will create the following files in the `data/` directory: `users.csv`, `events.csv`, `billing.csv`, `support.csv`, and `labels.csv`.

2.  **Create features:**

    ```bash
    python src/features.py
    ```

    This will create the `features_table.csv` file in the `data/` directory.

3.  **Train the model:**

    ```bash
    python src/train_model.py
    ```

    This will save the trained model as `churn_rf.joblib` and the feature importances as `feature_importances.csv` in the `data/` directory.

4.  **Run the Streamlit dashboard:**

    ```bash
    streamlit run src/streamlit_app.py
    ```

    This will start a local web server and open the dashboard in your browser.

## Data

The following data is generated by the `generate_saas_data.py` script:

-   **`users.csv`**: User information, including `user_id`, `signup_date`, `plan`, and `country`.
-   **`events.csv`**: User activity, including `user_id`, `event_date`, `sessions`, and `avg_session_minutes`.
-   **`billing.csv`**: Billing information, including `user_id`, `bill_date`, `plan`, and `price`.
-   **`support.csv`**: Support ticket information, including `user_id`, `ticket_date`, and `severity`.
-   **`labels.csv`**: Churn labels, including `user_id`, `churn_label`, and `churn_prob`.

## Model

A Random Forest Classifier is used to predict customer churn. The model is trained on the features in `features_table.csv` and the labels in `labels.csv`. The trained model is saved as `churn_rf.joblib`.

## Dashboard

The Streamlit dashboard (`streamlit_app.py`) provides the following information:

-   **Feature Importances**: A bar chart showing the importance of each feature in the model.
-   **Top At-Risk Accounts**: A table of the top 50 customers with the highest churn probability.

<img width="1172" height="738" alt="image" src="https://github.com/user-attachments/assets/b1598b90-9e9b-4bd9-9817-9ddaeadc1e26" />
<img width="1133" height="745" alt="image" src="https://github.com/user-attachments/assets/d252409e-a75c-4d4e-9294-2ba0a754e484" />
